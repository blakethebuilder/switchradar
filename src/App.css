.custom-marker {
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Stable marker styling to prevent hover glitches */
.custom-marker-stable {
  display: flex;
  align-items: center;
  justify-content: center;
  /* Prevent hover state changes */
  pointer-events: auto;
}

.custom-marker-stable .marker-content {
  /* Prevent any transitions or hover effects that cause glitches */
  transition: none !important;
  transform: none !important;
  /* Ensure stable rendering */
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  /* Force hardware acceleration for stability */
  will-change: auto;
}

/* Safe hover effect that doesn't cause disappearing - only changes opacity */
.custom-marker-stable:hover .marker-content {
  /* Safe hover effect - only opacity change, no transforms */
  opacity: 0.8;
  /* Still prevent any transforms that cause glitches */
  transform: none !important;
  transition: none !important;
}

/* Stable cluster styling to prevent hover glitches - ONLY for clusters */
.leaflet-marker-icon.cluster-icon-stable {
  /* Prevent any transitions or hover effects that cause glitches */
  transition: none !important;
  /* Ensure stable rendering */
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  /* Force hardware acceleration for stability */
  will-change: auto;
}

.leaflet-marker-icon.cluster-icon-stable .cluster-marker-stable {
  /* Prevent any hover state changes */
  transition: none !important;
  transform: none !important;
  /* Stable positioning */
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* Prevent cluster hover effects that cause jumping - ONLY for clusters */
.leaflet-marker-icon.cluster-icon-stable:hover .cluster-marker-stable {
  /* No hover effects to prevent glitches */
  transform: none !important;
  transition: none !important;
}

/* Override any leaflet cluster hover effects - ONLY for clusters */
.leaflet-marker-icon.cluster-icon-stable:hover {
  transform: none !important;
  transition: none !important;
}

/* Prevent cluster group hover effects - ONLY for clusters */
.marker-cluster.cluster-icon-stable:hover {
  transform: none !important;
  transition: none !important;
}

/* More comprehensive cluster hover prevention */
.leaflet-marker-icon.cluster-icon-stable,
.leaflet-marker-icon.cluster-icon-stable:hover,
.leaflet-marker-icon.cluster-icon-stable:focus,
.leaflet-marker-icon.cluster-icon-stable:active {
  transform: none !important;
  transition: none !important;
  animation: none !important;
  will-change: auto !important;
}

/* Prevent any Leaflet default cluster animations */
.leaflet-marker-icon.cluster-icon-stable * {
  transform: none !important;
  transition: none !important;
  animation: none !important;
}

/* Override MarkerCluster default hover styles */
.marker-cluster-small.cluster-icon-stable,
.marker-cluster-medium.cluster-icon-stable,
.marker-cluster-large.cluster-icon-stable {
  transform: none !important;
  transition: none !important;
  animation: none !important;
}

.marker-cluster-small.cluster-icon-stable:hover,
.marker-cluster-medium.cluster-icon-stable:hover,
.marker-cluster-large.cluster-icon-stable:hover {
  transform: none !important;
  transition: none !important;
  animation: none !important;
}

.leaflet-popup-content-wrapper {
  border-radius: 12px;
}

.leaflet-popup-content {
  margin: 0;
}

.marker-cluster-small,
.marker-cluster-medium,
.marker-cluster-large {
  background-color: rgba(79, 70, 229, 0.2);
}

.marker-cluster-small div,
.marker-cluster-medium div,
.marker-cluster-large div {
  background-color: rgba(79, 70, 229, 0.9);
  color: white;
  font-size: 11px;
  font-weight: 700;
  border-radius: 999px;
  width: 30px;
  height: 30px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 2px solid white;
}

/* Enhanced sticky navbar support for mobile/tablet zoom */
.sticky-navbar {
  position: sticky;
  top: 0;
  z-index: 50;
  width: 100%;
  /* Ensure it stays sticky during zoom */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  /* Better backdrop blur support */
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}

/* Prevent layout shifts during zoom */
@media screen and (max-width: 1024px) {
  .sticky-navbar {
    /* Force hardware acceleration for better performance */
    will-change: transform;
    /* Ensure proper stacking context */
    isolation: isolate;
  }
}

/* Better mobile viewport handling */
@media screen and (max-width: 640px) {
  .sticky-navbar {
    /* Prevent zoom issues on mobile */
    position: -webkit-sticky;
    position: sticky;
    /* Ensure it doesn't get cut off */
    min-height: 64px;
  }
}

/* Tablet specific optimizations */
@media screen and (min-width: 641px) and (max-width: 1024px) {
  .sticky-navbar {
    /* Better tablet support */
    min-height: 80px;
  }
}
