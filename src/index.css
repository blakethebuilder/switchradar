@import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Inter:wght@400;500;600&display=swap');

@import "tailwindcss";

:root {
  --primary: #4F46E5;
  --primary-hover: #4338CA;
  --bg-main: #F8FAFC;
  --bg-card: #FFFFFF;
}

@layer base {
  body {
    @apply text-slate-900 bg-slate-50 font-sans antialiased;
    font-family: 'Inter', system-ui, sans-serif;
    overflow-x: hidden;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-semibold tracking-tight;
    font-family: 'Plus Jakarta Sans', sans-serif;
  }
}

@layer components {
  .glass-card {
    @apply bg-white/80 backdrop-blur-md border border-white/20 shadow-xl shadow-slate-200/50;
  }

  .btn-primary {
    @apply px-4 py-2 bg-indigo-600 text-white rounded-xl font-semibold hover:bg-indigo-700 active:scale-95 transition-all flex items-center gap-2 shadow-lg shadow-indigo-100;
  }

  .btn-secondary {
    @apply px-4 py-2 bg-white text-slate-700 border border-slate-200 rounded-xl font-semibold hover:bg-slate-50 active:scale-95 transition-all flex items-center gap-2 shadow-sm;
  }

  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    @apply bg-slate-100 rounded-full;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    @apply bg-slate-300 rounded-full;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    @apply bg-slate-400;
  }

  .custom-scrollbar::-webkit-scrollbar-corner {
    @apply bg-transparent;
  }

  /* Firefox scrollbar */
  .custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: rgb(203 213 225) rgb(241 245 249);
  }

  /* Mobile touch improvements */
  @media (max-width: 768px) {
    .touch-manipulation {
      touch-action: manipulation;
    }
    
    /* Larger touch targets on mobile */
    button, select, input[type="file"] {
      min-height: 44px;
      touch-action: manipulation;
    }
    
    /* Prevent zoom on input focus */
    input, select, textarea {
      font-size: 16px;
    }
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    @apply bg-slate-200 rounded-full hover:bg-slate-300;
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

.leaflet-container {
  @apply rounded-3xl overflow-hidden;
  font-family: inherit !important;
  z-index: 10;
}

.leaflet-popup-content-wrapper {
  @apply rounded-2xl shadow-2xl border border-slate-100;
  padding: 0 !important;
  overflow: hidden;
}

.leaflet-popup-content {
  margin: 0 !important;
  width: auto !important;
}

/* Enhanced cluster styling */
.marker-cluster-small,
.marker-cluster-medium,
.marker-cluster-large {
  @apply !bg-indigo-600/20 backdrop-blur-md;
}

.marker-cluster-small div,
.marker-cluster-medium div,
.marker-cluster-large div {
  @apply !bg-indigo-600 !text-white !font-bold rounded-full;
}

/* Custom cluster icon styling */
.custom-cluster-icon {
  background: transparent !important;
  border: none !important;
}

.custom-cluster-icon div {
  transition: all 0.2s ease !important;
}

.custom-cluster-icon:hover div {
  transform: scale(1.1) !important;
}

/* Custom marker styling */
.custom-marker {
  background: transparent !important;
  border: none !important;
}

/* Spiderfy line styling */
.leaflet-cluster-anim .leaflet-marker-icon,
.leaflet-cluster-anim .leaflet-marker-shadow {
  transition: transform 0.3s ease-out, opacity 0.3s ease-in !important;
}

/* Spiderfy polygon styling */
.leaflet-cluster-spider-leg {
  stroke: #6366f1 !important;
  stroke-width: 2 !important;
  stroke-opacity: 0.6 !important;
  fill: none !important;
}

/* Mobile performance optimizations */
@media (max-width: 768px) {
  .leaflet-container {
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    /* Enable hardware acceleration */
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    -webkit-perspective: 1000;
    perspective: 1000;
  }
  
  .custom-marker,
  .custom-cluster-icon {
    will-change: transform;
    /* Optimize for mobile rendering */
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
  }
  
  /* Reduce animations on mobile for better performance */
  .marker-cluster-small,
  .marker-cluster-medium,
  .marker-cluster-large {
    transition: none !important;
  }
  
  /* Optimize spiderfy animations for mobile */
  .leaflet-cluster-anim .leaflet-marker-icon,
  .leaflet-cluster-anim .leaflet-marker-shadow {
    transition: transform 0.2s ease-out !important; /* Faster on mobile */
  }
  
  /* Optimize scrolling */
  .custom-scrollbar {
    -webkit-overflow-scrolling: touch;
  }
}

/* Tablet optimizations */
@media (min-width: 768px) and (max-width: 1024px) {
  .leaflet-container {
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
  }
  
  /* Slightly reduced spiral animations for tablets */
  .leaflet-cluster-anim .leaflet-marker-icon,
  .leaflet-cluster-anim .leaflet-marker-shadow {
    transition: transform 0.25s ease-out !important;
  }
}

/* Enhanced cluster icon performance */
.cluster-icon {
  will-change: transform;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

.cluster-icon:hover {
  transform: scale(1.05) !important;
}

/* Dropped pin marker optimizations */
.dropped-pin-marker {
  will-change: transform;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

/* Fallback marker optimizations */
.fallback-marker {
  will-change: transform;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}